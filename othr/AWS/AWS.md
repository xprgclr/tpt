
- [Создание машины и её настройка](#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%BC%D0%B0%D1%88%D0%B8%D0%BD%D1%8B%20%D0%B8%20%D0%B5%D1%91%20%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0)
	- [Application and OS Images](#Application%20and%20OS%20Images)
	- [Create key pair](#Create%20key%20pair)
	- [Network settings](#Network%20settings)
	- [Configure storage](#Configure%20storage)
	- [Advanced storage](#Advanced%20storage)
- [Коннект и установка LAMP](#%D0%9A%D0%BE%D0%BD%D0%BD%D0%B5%D0%BA%D1%82%20%D0%B8%20%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0%20LAMP)
- [Завершение работы](#%D0%97%D0%B0%D0%B2%D0%B5%D1%80%D1%88%D0%B5%D0%BD%D0%B8%D0%B5%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B)




## Создание машины и её настройка

- Логинимся - https://console.aws.amazon.com/console/home?nc2=h_ct&src=header-signin

- В строку поиска вбиваем VPC

![](attachments/Pasted%20image%2020241013212722.png)

- И делаем EС2 "инстанцию"
  
![](attachments/Pasted%20image%2020241013212749.png)


- Нас интересуют следущие поля/настройки:
### Application and OS Images

![](attachments/Pasted%20image%2020241013212812.png)

- **Quick start:** выбираем любой понравившийся Linux дистрибутив. В моём случае это Debian 12

- **Instance type**: В зависимости от региона выбираем *t2.micro* или *t3.micro*. Главное чтоб с припиской *"Free tier eligible"*.


### Create key pair

![](attachments/Pasted%20image%2020241013212836.png)

Тут можем назначить уже существующие пары ssh ключей, либо создать новые. 

- Создаём новую пару ssh ключей. 
- **Алгоритм шифрования** предпочтительней ed25519, но в нашем случае не принципиально.
- **Формат ключа** выбираем .ppk , если будем коннектится с putty.  ( Ибо в противном случае придется его конвертировать, что есть лишние телодвижения )

После создания ключа, он автоматом скачается

![](attachments/Pasted%20image%2020241013212846.png)

### Network settings

![](attachments/Pasted%20image%2020241013212852.png)

Очевидно, из названия тут идёт настройка сети и групп безопасности/фаервола

- Создаем новую группу безопасности
- Разрешаем траффик по **SSH**, выбираем диапазон сетей с которых можно коннектиться.  Оставляем 0.0.0.0/0 для коннекта отовсюду, либо забиваем свой внешний IP. ( Но AWS рекомендует задавать этот параметр "фиксированным" для в кач-ве мер безопасности. )
- Если планируем поднимать веб-сервер на виртуалке, то разрешаем **HTTP, HTTPS** порты

### Configure storage

Конфигурация носителей. Оставляем по умолчанию

### Advanced storage

Дополнительные параметры, в нашем случае не понадобятся.  

---
![](attachments/Pasted%20image%2020241013212904.png)

- Запускаем Launch Instance   
 
![](attachments/Pasted%20image%2020241013213719.png)

- Всё ок, После создания видим дашборд, выбираем *connect to your instance* и видим следующий экран, где будет указан публичный ip и имя пользователя которым можно залогиниться

![](attachments/Pasted%20image%2020241013213826.png)

## Коннект и установка LAMP

- Перемещаемся в PuTTy, закидываем скачанный ключ и коннектимся.

![](attachments/Pasted%20image%2020241013213923.png)



![](attachments/Pasted%20image%2020241013213956.png)

- Теперь ставим Apache на машину

```bash
sudo -i
apt update
apt install -y apache2
```

>[!info]
В зависимости от дистрибутива Linux команды/названия пакетов могут отличаться. Возможно где-то нужно будет прописывать правила фаервола (ufw) внутри самого linux. А где-то нужно будет стартовать веб-сервер в ручную. (как в  случае с "RHEL", сервис называется httpd, вместо apache2. который нужно стартовать вручную после установки через  systemctl start httpd )

- Заходим на наш созданный веб-сервер по публичному ip

![](attachments/Pasted%20image%2020241013214130.png)

Все машины и их настройка осуществляется через вкладку **Instances**. Тут же можем узнать и доменное имя машины и обратиться к ней, вместо указания ip

![](attachments/Pasted%20image%2020241013214204.png)

![](attachments/Pasted%20image%2020241013214226.png)

- Обращаемся по http, т.к у нас нет сертификатов для https.
## Завершение работы

- Если виртуальная машина нам больше не нужна то нужно её отключать  ( Instance state -> Stop instance )

![](attachments/Pasted%20image%2020241013214254.png)
![](attachments/Pasted%20image%2020241013214301.png)

>Stopping - > Stopped

![](attachments/Pasted%20image%2020241013214312.png)

- Done