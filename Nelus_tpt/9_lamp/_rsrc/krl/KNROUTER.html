<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>KNROUTER</title>
  </head>
  <body>
    <div style="display:inline-block;white-space:pre;background-color:#0C0C0C;font-family:'Lucida Console',monospace;font-size:16pt;padding:4px;"><span
style="color:#CCCCCC;background-color:#0C0C0C;">PowerShell 7.4.0<br>PS C:\Users\Kirill.Nelus&gt; </span><span
style="color:#F9F1A5;background-color:#0C0C0C;">ssh </span><span style="color:#CCCCCC;background-color:#0C0C0C;">it@127.0.0.1 </span><span
style="color:#767676;background-color:#0C0C0C;">-p </span><span style="color:#F2F2F2;background-color:#0C0C0C;">2222<br></span><span
style="color:#CCCCCC;background-color:#0C0C0C;">it@127.0.0.1's password:<br>Permission denied, please try again.<br>it@127.0.0.1's password:<br>Linux bookworm-unattended 6.1.0-17-amd64 #1 SMP PREEMPT_DYNAMIC Debian 6.1.69-1 (2023-12-30) x86_64<br><br>The programs included with the Debian GNU/Linux system are free software;<br>the exact distribution terms for each program are described in the<br>individual files in /usr/share/doc/*/copyright.<br><br>Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent<br>permitted by applicable law.<br>Last login: Wed Jan 10 10:51:19 2024 from 10.0.2.2<br></span><span
style="color:#16C60C;background-color:#0C0C0C;">it@bookworm-unattended</span><span
style="color:#CCCCCC;background-color:#0C0C0C;">:</span><span style="color:#3B78FF;background-color:#0C0C0C;">~</span><span
style="color:#CCCCCC;background-color:#0C0C0C;">$ sudo nano /etc/network/interfaces<br>[sudo] password for it:<br></span><span
style="color:#16C60C;background-color:#0C0C0C;">it@bookworm-unattended</span><span
style="color:#CCCCCC;background-color:#0C0C0C;">:</span><span style="color:#3B78FF;background-color:#0C0C0C;">~</span><span
style="color:#CCCCCC;background-color:#0C0C0C;">$ sudo nano /etc/hosts<br></span><span
style="color:#16C60C;background-color:#0C0C0C;">it@bookworm-unattended</span><span
style="color:#CCCCCC;background-color:#0C0C0C;">:</span><span style="color:#3B78FF;background-color:#0C0C0C;">~</span><span
style="color:#CCCCCC;background-color:#0C0C0C;">$ sudo -i<br>root@bookworm-unattended:~# bash router-down<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>Package 'dnsmasq' is not installed, so not removed<br>0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.<br>router-down: line 32: iptables: command not found<br>router-down: line 33: iptables: command not found<br>router-down: line 35: iptables: command not found<br>router-down: line 36: iptables: command not found<br>router-down: line 38: iptables: command not found<br>router-down: line 39: iptables: command not found<br>router-down: line 40: iptables: command not found<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>Package 'iptables' is not installed, so not removed<br>0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.<br>Success (router installed)<br>root@bookworm-unattended:~# ip a<br>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000<br>    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00<br>    inet 127.0.0.1/8 scope host lo<br>       valid_lft forever preferred_lft forever<br>    inet6 ::1/128 scope host noprefixroute<br>       valid_lft forever preferred_lft forever<br>2: enp0s3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000<br>    link/ether 08:00:27:12:e5:5d brd ff:ff:ff:ff:ff:ff<br>    inet 10.0.2.15/24 brd 10.0.2.255 scope global dynamic enp0s3<br>       valid_lft 82589sec preferred_lft 82589sec<br>    inet6 fe80::a00:27ff:fe12:e55d/64 scope link<br>       valid_lft forever preferred_lft forever<br>3: enp0s8: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000<br>    link/ether 08:00:27:d8:bd:6d brd ff:ff:ff:ff:ff:ff<br>    inet 10.0.10.1/24 brd 10.0.10.255 scope global enp0s8<br>       valid_lft forever preferred_lft forever<br>    inet6 fe80::a00:27ff:fed8:bd6d/64 scope link<br><br><br>root@bookworm-unattended:~# bash router-down<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>Package 'dnsmasq' is not installed, so not removed<br>0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.<br>router-down: line 34: iptables: command not found<br>router-down: line 35: iptables: command not found<br>router-down: line 37: iptables: command not found<br>router-down: line 38: iptables: command not found<br>router-down: line 40: iptables: command not found<br>router-down: line 41: iptables: command not found<br>router-down: line 42: iptables: command not found<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>Package 'iptables' is not installed, so not removed<br>0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.<br>Success (router installed)<br>root@bookworm-unattended:~# ip a<br>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000<br>    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00<br>    inet 127.0.0.1/8 scope host lo<br>       valid_lft forever preferred_lft forever<br>    inet6 ::1/128 scope host noprefixroute<br>       valid_lft forever preferred_lft forever<br>2: enp0s3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000<br>    link/ether 08:00:27:12:e5:5d brd ff:ff:ff:ff:ff:ff<br>    inet 10.0.2.15/24 brd 10.0.2.255 scope global dynamic enp0s3<br>       valid_lft 86395sec preferred_lft 86395sec<br>    inet6 fe80::a00:27ff:fe12:e55d/64 scope link<br>       valid_lft forever preferred_lft forever<br>3: enp0s8: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000<br>    link/ether 08:00:27:d8:bd:6d brd ff:ff:ff:ff:ff:ff<br>    inet 10.0.10.1/24 brd 10.0.10.255 scope global enp0s8<br>       valid_lft forever preferred_lft forever<br>    inet6 fe80::a00:27ff:fed8:bd6d/64 scope link<br>       valid_lft forever preferred_lft forever<br>root@bookworm-unattended:~# cat /etc/network/interfaces<br># This file describes the network interfaces available on your system<br># and how to activate them. For more information, see interfaces(5).<br><br>source /etc/network/interfaces.d/*<br><br># The loopback network interface<br>auto lo<br>iface lo inet loopback<br><br># The primary network interface<br>allow-hotplug enp0s3<br>iface enp0s3 inet dhcp<br><br>root@bookworm-unattended:~# reboot<br><br>Broadcast message from root@bookworm-unattended on pts/1 (Wed 2024-01-10 12:03:05 UTC):<br><br>The system will reboot now!<br><br>Connection to 127.0.0.1 closed by remote host.<br>Connection to 127.0.0.1 closed.<br>PS C:\Users\Kirill.Nelus&gt; </span><span
style="color:#F9F1A5;background-color:#0C0C0C;">ssh </span><span style="color:#CCCCCC;background-color:#0C0C0C;">it@127.0.0.1 </span><span
style="color:#767676;background-color:#0C0C0C;">-p </span><span style="color:#F2F2F2;background-color:#0C0C0C;">2222<br></span><span
style="color:#CCCCCC;background-color:#0C0C0C;">it@127.0.0.1's password:<br>Linux bookworm-unattended 6.1.0-17-amd64 #1 SMP PREEMPT_DYNAMIC Debian 6.1.69-1 (2023-12-30) x86_64<br><br>The programs included with the Debian GNU/Linux system are free software;<br>the exact distribution terms for each program are described in the<br>individual files in /usr/share/doc/*/copyright.<br><br>Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent<br>permitted by applicable law.<br>Last login: Wed Jan 10 11:59:36 2024 from 10.0.2.2<br></span><span
style="color:#16C60C;background-color:#0C0C0C;">it@bookworm-unattended</span><span
style="color:#CCCCCC;background-color:#0C0C0C;">:</span><span style="color:#3B78FF;background-color:#0C0C0C;">~</span><span
style="color:#CCCCCC;background-color:#0C0C0C;">$ sudo -i<br>[sudo] password for it:<br>root@bookworm-unattended:~# ip a<br>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000<br>    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00<br>    inet 127.0.0.1/8 scope host lo<br>       valid_lft forever preferred_lft forever<br>    inet6 ::1/128 scope host noprefixroute<br>       valid_lft forever preferred_lft forever<br>2: enp0s3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000<br>    link/ether 08:00:27:12:e5:5d brd ff:ff:ff:ff:ff:ff<br>    inet 10.0.2.15/24 brd 10.0.2.255 scope global dynamic enp0s3<br>       valid_lft 86373sec preferred_lft 86373sec<br>    inet6 fe80::a00:27ff:fe12:e55d/64 scope link<br>       valid_lft forever preferred_lft forever<br>3: enp0s8: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN group default qlen 1000<br>    link/ether 08:00:27:d8:bd:6d brd ff:ff:ff:ff:ff:ff<br>root@bookworm-unattended:~# bash router-up<br>Hit:1 http://ftp.ee.debian.org/debian bookworm InRelease<br>Hit:2 http://ftp.ee.debian.org/debian bookworm-updates InRelease<br>Get:3 http://security.debian.org/debian-security bookworm-security InRelease [48.0 kB]<br>Fetched 48.0 kB in 0s (133 kB/s)<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>All packages are up to date.<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>Calculating upgrade... Done<br>0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>The following additional packages will be installed:<br>  dns-root-data dnsmasq-base libip6tc2 libnetfilter-conntrack3 libnfnetlink0<br>Suggested packages:<br>  resolvconf firewalld<br>The following NEW packages will be installed:<br>  dns-root-data dnsmasq dnsmasq-base iptables libip6tc2 libnetfilter-conntrack3 libnfnetlink0<br>0 upgraded, 7 newly installed, 0 to remove and 0 not upgraded.<br>Need to get 973 kB of archives.<br>After this operation, 3,988 kB of additional disk space will be used.<br>Get:1 http://ftp.ee.debian.org/debian bookworm/main amd64 dns-root-data all 2023010101 [4,124 B]<br>Get:2 http://ftp.ee.debian.org/debian bookworm/main amd64 libnfnetlink0 amd64 1.0.2-2 [15.1 kB]<br>Get:3 http://ftp.ee.debian.org/debian bookworm/main amd64 libnetfilter-conntrack3 amd64 1.0.9-3 [40.7 kB]<br>Get:4 http://ftp.ee.debian.org/debian bookworm/main amd64 dnsmasq-base amd64 2.89-1 [501 kB]<br>Get:5 http://ftp.ee.debian.org/debian bookworm/main amd64 dnsmasq all 2.89-1 [32.4 kB]<br>Get:6 http://ftp.ee.debian.org/debian bookworm/main amd64 libip6tc2 amd64 1.8.9-2 [19.4 kB]<br>Get:7 http://ftp.ee.debian.org/debian bookworm/main amd64 iptables amd64 1.8.9-2 [360 kB]<br>Fetched 973 kB in 0s (19.2 MB/s)<br>Selecting previously unselected package dns-root-data.<br>(Reading database ... 39933 files and directories currently installed.)<br>Preparing to unpack .../0-dns-root-data_2023010101_all.deb ...<br>Unpacking dns-root-data (2023010101) ...<br>Selecting previously unselected package libnfnetlink0:amd64.<br>Preparing to unpack .../1-libnfnetlink0_1.0.2-2_amd64.deb ...<br>Unpacking libnfnetlink0:amd64 (1.0.2-2) ...<br>Selecting previously unselected package libnetfilter-conntrack3:amd64.<br>Preparing to unpack .../2-libnetfilter-conntrack3_1.0.9-3_amd64.deb ...<br>Unpacking libnetfilter-conntrack3:amd64 (1.0.9-3) ...<br>Selecting previously unselected package dnsmasq-base.<br>Preparing to unpack .../3-dnsmasq-base_2.89-1_amd64.deb ...<br>Unpacking dnsmasq-base (2.89-1) ...<br>Selecting previously unselected package dnsmasq.<br>Preparing to unpack .../4-dnsmasq_2.89-1_all.deb ...<br>Unpacking dnsmasq (2.89-1) ...<br>Selecting previously unselected package libip6tc2:amd64.<br>Preparing to unpack .../5-libip6tc2_1.8.9-2_amd64.deb ...<br>Unpacking libip6tc2:amd64 (1.8.9-2) ...<br>Selecting previously unselected package iptables.<br>Preparing to unpack .../6-iptables_1.8.9-2_amd64.deb ...<br>Unpacking iptables (1.8.9-2) ...<br>Setting up libip6tc2:amd64 (1.8.9-2) ...<br>Setting up dns-root-data (2023010101) ...<br>Setting up libnfnetlink0:amd64 (1.0.2-2) ...<br>Setting up libnetfilter-conntrack3:amd64 (1.0.9-3) ...<br>Setting up iptables (1.8.9-2) ...<br>update-alternatives: using /usr/sbin/iptables-legacy to provide /usr/sbin/iptables (iptables) in auto mode<br>update-alternatives: using /usr/sbin/ip6tables-legacy to provide /usr/sbin/ip6tables (ip6tables) in auto mode<br>update-alternatives: using /usr/sbin/iptables-nft to provide /usr/sbin/iptables (iptables) in auto mode<br>update-alternatives: using /usr/sbin/ip6tables-nft to provide /usr/sbin/ip6tables (ip6tables) in auto mode<br>update-alternatives: using /usr/sbin/arptables-nft to provide /usr/sbin/arptables (arptables) in auto mode<br>update-alternatives: using /usr/sbin/ebtables-nft to provide /usr/sbin/ebtables (ebtables) in auto mode<br>Setting up dnsmasq-base (2.89-1) ...<br>Setting up dnsmasq (2.89-1) ...<br>Created symlink /etc/systemd/system/multi-user.target.wants/dnsmasq.service → /lib/systemd/system/dnsmasq.service.<br>Processing triggers for libc-bin (2.36-9+deb12u3) ...<br>Processing triggers for dbus (1.14.10-1~deb12u1) ...<br>router-up: line 23: syntax error near unexpected token `else'<br>router-up: line 23: `else'<br>root@bookworm-unattended:~# nano router-up<br>root@bookworm-unattended:~# bash router-down<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>The following packages will be REMOVED:<br>  dns-root-data* dnsmasq* dnsmasq-base*<br>0 upgraded, 0 newly installed, 3 to remove and 0 not upgraded.<br>After this operation, 1,261 kB disk space will be freed.<br>(Reading database ... 40223 files and directories currently installed.)<br>Removing dns-root-data (2023010101) ...<br>Removing dnsmasq (2.89-1) ...<br>Removing dnsmasq-base (2.89-1) ...<br>(Reading database ... 40165 files and directories currently installed.)<br>Purging configuration files for dnsmasq-base (2.89-1) ...<br>Purging configuration files for dnsmasq (2.89-1) ...<br>Processing triggers for dbus (1.14.10-1~deb12u1) ...<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>The following packages will be REMOVED:<br>  iptables* libip6tc2* libnetfilter-conntrack3* libnfnetlink0*<br>0 upgraded, 0 newly installed, 4 to remove and 0 not upgraded.<br>After this operation, 2,728 kB disk space will be freed.<br>(Reading database ... 40149 files and directories currently installed.)<br>Removing iptables (1.8.9-2) ...<br>Removing libip6tc2:amd64 (1.8.9-2) ...<br>Removing libnetfilter-conntrack3:amd64 (1.0.9-3) ...<br>Removing libnfnetlink0:amd64 (1.0.2-2) ...<br>Processing triggers for libc-bin (2.36-9+deb12u3) ...<br>Success (router installed)<br>root@bookworm-unattended:~# bash router-up<br>Hit:1 http://ftp.ee.debian.org/debian bookworm InRelease<br>Hit:2 http://ftp.ee.debian.org/debian bookworm-updates InRelease<br>Hit:3 http://security.debian.org/debian-security bookworm-security InRelease<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>All packages are up to date.<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>Calculating upgrade... Done<br>0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>The following additional packages will be installed:<br>  dns-root-data dnsmasq-base libip6tc2 libnetfilter-conntrack3 libnfnetlink0<br>Suggested packages:<br>  resolvconf firewalld<br>The following NEW packages will be installed:<br>  dns-root-data dnsmasq dnsmasq-base iptables libip6tc2 libnetfilter-conntrack3 libnfnetlink0<br>0 upgraded, 7 newly installed, 0 to remove and 0 not upgraded.<br>Need to get 973 kB of archives.<br>After this operation, 3,988 kB of additional disk space will be used.<br>Get:1 http://ftp.ee.debian.org/debian bookworm/main amd64 dns-root-data all 2023010101 [4,124 B]<br>Get:2 http://ftp.ee.debian.org/debian bookworm/main amd64 libnfnetlink0 amd64 1.0.2-2 [15.1 kB]<br>Get:3 http://ftp.ee.debian.org/debian bookworm/main amd64 libnetfilter-conntrack3 amd64 1.0.9-3 [40.7 kB]<br>Get:4 http://ftp.ee.debian.org/debian bookworm/main amd64 dnsmasq-base amd64 2.89-1 [501 kB]<br>Get:5 http://ftp.ee.debian.org/debian bookworm/main amd64 dnsmasq all 2.89-1 [32.4 kB]<br>Get:6 http://ftp.ee.debian.org/debian bookworm/main amd64 libip6tc2 amd64 1.8.9-2 [19.4 kB]<br>Get:7 http://ftp.ee.debian.org/debian bookworm/main amd64 iptables amd64 1.8.9-2 [360 kB]<br>Fetched 973 kB in 0s (6,869 kB/s)<br>Selecting previously unselected package dns-root-data.<br>(Reading database ... 39933 files and directories currently installed.)<br>Preparing to unpack .../0-dns-root-data_2023010101_all.deb ...<br>Unpacking dns-root-data (2023010101) ...<br>Selecting previously unselected package libnfnetlink0:amd64.<br>Preparing to unpack .../1-libnfnetlink0_1.0.2-2_amd64.deb ...<br>Unpacking libnfnetlink0:amd64 (1.0.2-2) ...<br>Selecting previously unselected package libnetfilter-conntrack3:amd64.<br>Preparing to unpack .../2-libnetfilter-conntrack3_1.0.9-3_amd64.deb ...<br>Unpacking libnetfilter-conntrack3:amd64 (1.0.9-3) ...<br>Selecting previously unselected package dnsmasq-base.<br>Preparing to unpack .../3-dnsmasq-base_2.89-1_amd64.deb ...<br>Unpacking dnsmasq-base (2.89-1) ...<br>Selecting previously unselected package dnsmasq.<br>Preparing to unpack .../4-dnsmasq_2.89-1_all.deb ...<br>Unpacking dnsmasq (2.89-1) ...<br>Selecting previously unselected package libip6tc2:amd64.<br>Preparing to unpack .../5-libip6tc2_1.8.9-2_amd64.deb ...<br>Unpacking libip6tc2:amd64 (1.8.9-2) ...<br>Selecting previously unselected package iptables.<br>Preparing to unpack .../6-iptables_1.8.9-2_amd64.deb ...<br>Unpacking iptables (1.8.9-2) ...<br>Setting up libip6tc2:amd64 (1.8.9-2) ...<br>Setting up dns-root-data (2023010101) ...<br>Setting up libnfnetlink0:amd64 (1.0.2-2) ...<br>Setting up libnetfilter-conntrack3:amd64 (1.0.9-3) ...<br>Setting up iptables (1.8.9-2) ...<br>update-alternatives: using /usr/sbin/iptables-legacy to provide /usr/sbin/iptables (iptables) in auto mode<br>update-alternatives: using /usr/sbin/ip6tables-legacy to provide /usr/sbin/ip6tables (ip6tables) in auto mode<br>update-alternatives: using /usr/sbin/iptables-nft to provide /usr/sbin/iptables (iptables) in auto mode<br>update-alternatives: using /usr/sbin/ip6tables-nft to provide /usr/sbin/ip6tables (ip6tables) in auto mode<br>update-alternatives: using /usr/sbin/arptables-nft to provide /usr/sbin/arptables (arptables) in auto mode<br>update-alternatives: using /usr/sbin/ebtables-nft to provide /usr/sbin/ebtables (ebtables) in auto mode<br>Setting up dnsmasq-base (2.89-1) ...<br>Setting up dnsmasq (2.89-1) ...<br>Created symlink /etc/systemd/system/multi-user.target.wants/dnsmasq.service → /lib/systemd/system/dnsmasq.service.<br>Processing triggers for libc-bin (2.36-9+deb12u3) ...<br>Processing triggers for dbus (1.14.10-1~deb12u1) ...<br>router-up: line 51: syntax error near unexpected token `else'<br>router-up: line 51: `else'<br>root@bookworm-unattended:~# nano router-up<br>root@bookworm-unattended:~# bash router-down<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>The following packages will be REMOVED:<br>  dns-root-data* dnsmasq* dnsmasq-base*<br>0 upgraded, 0 newly installed, 3 to remove and 0 not upgraded.<br>After this operation, 1,261 kB disk space will be freed.<br>(Reading database ... 40223 files and directories currently installed.)<br>Removing dns-root-data (2023010101) ...<br>Removing dnsmasq (2.89-1) ...<br>Removing dnsmasq-base (2.89-1) ...<br>(Reading database ... 40165 files and directories currently installed.)<br>Purging configuration files for dnsmasq-base (2.89-1) ...<br>Purging configuration files for dnsmasq (2.89-1) ...<br>Processing triggers for dbus (1.14.10-1~deb12u1) ...<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>The following packages will be REMOVED:<br>  iptables* libip6tc2* libnetfilter-conntrack3* libnfnetlink0*<br>0 upgraded, 0 newly installed, 4 to remove and 0 not upgraded.<br>After this operation, 2,728 kB disk space will be freed.<br>(Reading database ... 40149 files and directories currently installed.)<br>Removing iptables (1.8.9-2) ...<br>Removing libip6tc2:amd64 (1.8.9-2) ...<br>Removing libnetfilter-conntrack3:amd64 (1.0.9-3) ...<br>Removing libnfnetlink0:amd64 (1.0.2-2) ...<br>Processing triggers for libc-bin (2.36-9+deb12u3) ...<br>Success (router installed)<br>root@bookworm-unattended:~# bash router-up<br>Hit:1 http://ftp.ee.debian.org/debian bookworm InRelease<br>Hit:2 http://ftp.ee.debian.org/debian bookworm-updates InRelease<br>Hit:3 http://security.debian.org/debian-security bookworm-security InRelease<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>All packages are up to date.<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>Calculating upgrade... Done<br>0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>The following additional packages will be installed:<br>  dns-root-data dnsmasq-base libip6tc2 libnetfilter-conntrack3 libnfnetlink0<br>Suggested packages:<br>  resolvconf firewalld<br>The following NEW packages will be installed:<br>  dns-root-data dnsmasq dnsmasq-base iptables libip6tc2 libnetfilter-conntrack3 libnfnetlink0<br>0 upgraded, 7 newly installed, 0 to remove and 0 not upgraded.<br>Need to get 973 kB of archives.<br>After this operation, 3,988 kB of additional disk space will be used.<br>Get:1 http://ftp.ee.debian.org/debian bookworm/main amd64 dns-root-data all 2023010101 [4,124 B]<br>Get:2 http://ftp.ee.debian.org/debian bookworm/main amd64 libnfnetlink0 amd64 1.0.2-2 [15.1 kB]<br>Get:3 http://ftp.ee.debian.org/debian bookworm/main amd64 libnetfilter-conntrack3 amd64 1.0.9-3 [40.7 kB]<br>Get:4 http://ftp.ee.debian.org/debian bookworm/main amd64 dnsmasq-base amd64 2.89-1 [501 kB]<br>Get:5 http://ftp.ee.debian.org/debian bookworm/main amd64 dnsmasq all 2.89-1 [32.4 kB]<br>Get:6 http://ftp.ee.debian.org/debian bookworm/main amd64 libip6tc2 amd64 1.8.9-2 [19.4 kB]<br>Get:7 http://ftp.ee.debian.org/debian bookworm/main amd64 iptables amd64 1.8.9-2 [360 kB]<br>Fetched 973 kB in 0s (18.8 MB/s)<br>Selecting previously unselected package dns-root-data.<br>(Reading database ... 39933 files and directories currently installed.)<br>Preparing to unpack .../0-dns-root-data_2023010101_all.deb ...<br>Unpacking dns-root-data (2023010101) ...<br>Selecting previously unselected package libnfnetlink0:amd64.<br>Preparing to unpack .../1-libnfnetlink0_1.0.2-2_amd64.deb ...<br>Unpacking libnfnetlink0:amd64 (1.0.2-2) ...<br>Selecting previously unselected package libnetfilter-conntrack3:amd64.<br>Preparing to unpack .../2-libnetfilter-conntrack3_1.0.9-3_amd64.deb ...<br>Unpacking libnetfilter-conntrack3:amd64 (1.0.9-3) ...<br>Selecting previously unselected package dnsmasq-base.<br>Preparing to unpack .../3-dnsmasq-base_2.89-1_amd64.deb ...<br>Unpacking dnsmasq-base (2.89-1) ...<br>Selecting previously unselected package dnsmasq.<br>Preparing to unpack .../4-dnsmasq_2.89-1_all.deb ...<br>Unpacking dnsmasq (2.89-1) ...<br>Selecting previously unselected package libip6tc2:amd64.<br>Preparing to unpack .../5-libip6tc2_1.8.9-2_amd64.deb ...<br>Unpacking libip6tc2:amd64 (1.8.9-2) ...<br>Selecting previously unselected package iptables.<br>Preparing to unpack .../6-iptables_1.8.9-2_amd64.deb ...<br>Unpacking iptables (1.8.9-2) ...<br>Setting up libip6tc2:amd64 (1.8.9-2) ...<br>Setting up dns-root-data (2023010101) ...<br>Setting up libnfnetlink0:amd64 (1.0.2-2) ...<br>Setting up libnetfilter-conntrack3:amd64 (1.0.9-3) ...<br>Setting up iptables (1.8.9-2) ...<br>update-alternatives: using /usr/sbin/iptables-legacy to provide /usr/sbin/iptables (iptables) in auto mode<br>update-alternatives: using /usr/sbin/ip6tables-legacy to provide /usr/sbin/ip6tables (ip6tables) in auto mode<br>update-alternatives: using /usr/sbin/iptables-nft to provide /usr/sbin/iptables (iptables) in auto mode<br>update-alternatives: using /usr/sbin/ip6tables-nft to provide /usr/sbin/ip6tables (ip6tables) in auto mode<br>update-alternatives: using /usr/sbin/arptables-nft to provide /usr/sbin/arptables (arptables) in auto mode<br>update-alternatives: using /usr/sbin/ebtables-nft to provide /usr/sbin/ebtables (ebtables) in auto mode<br>Setting up dnsmasq-base (2.89-1) ...<br>Setting up dnsmasq (2.89-1) ...<br>Created symlink /etc/systemd/system/multi-user.target.wants/dnsmasq.service → /lib/systemd/system/dnsmasq.service.<br>Processing triggers for libc-bin (2.36-9+deb12u3) ...<br>Processing triggers for dbus (1.14.10-1~deb12u1) ...<br>Initial configuration exists<br>Success (router installed)<br>root@bookworm-unattended:~# ip a<br>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000<br>    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00<br>    inet 127.0.0.1/8 scope host lo<br>       valid_lft forever preferred_lft forever<br>    inet6 ::1/128 scope host noprefixroute<br>       valid_lft forever preferred_lft forever<br>2: enp0s3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000<br>    link/ether 08:00:27:12:e5:5d brd ff:ff:ff:ff:ff:ff<br>    inet 10.0.2.15/24 brd 10.0.2.255 scope global dynamic enp0s3<br>       valid_lft 86384sec preferred_lft 86384sec<br>    inet6 fe80::a00:27ff:fe12:e55d/64 scope link<br>       valid_lft forever preferred_lft forever<br>3: enp0s8: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN group default qlen 1000<br>    link/ether 08:00:27:d8:bd:6d brd ff:ff:ff:ff:ff:ff<br>root@bookworm-unattended:~# cat /etc/network/interfaces<br># This file describes the network interfaces available on your system<br># and how to activate them. For more information, see interfaces(5).<br><br>source /etc/network/interfaces.d/*<br><br># The loopback network interface<br>auto lo<br>iface lo inet loopback<br><br># The primary network interface<br>allow-hotplug enp0s3<br>iface enp0s3 inet dhcp<br><br># Secondary network interface<br><br>allow-hotplug enp0s8<br>iface enp0s8 inet static<br>        address 10.0.10.1<br>        netmask 255.255.255.0<br>        gateway 10.0.10.1<br>        dns-search google.com<br>        dns-nameservers 10.0.10.1<br>root@bookworm-unattended:~# nano /etc/network/interfaces<br>root@bookworm-unattended:~# nano router-up<br>root@bookworm-unattended:~# bash router-down<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>The following packages will be REMOVED:<br>  dns-root-data* dnsmasq* dnsmasq-base*<br>0 upgraded, 0 newly installed, 3 to remove and 0 not upgraded.<br>After this operation, 1,261 kB disk space will be freed.<br>(Reading database ... 40223 files and directories currently installed.)<br>Removing dns-root-data (2023010101) ...<br>Removing dnsmasq (2.89-1) ...<br>Removing dnsmasq-base (2.89-1) ...<br>(Reading database ... 40165 files and directories currently installed.)<br>Purging configuration files for dnsmasq-base (2.89-1) ...<br>Purging configuration files for dnsmasq (2.89-1) ...<br>Processing triggers for dbus (1.14.10-1~deb12u1) ...<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>The following packages will be REMOVED:<br>  iptables* libip6tc2* libnetfilter-conntrack3* libnfnetlink0*<br>0 upgraded, 0 newly installed, 4 to remove and 0 not upgraded.<br>After this operation, 2,728 kB disk space will be freed.<br>(Reading database ... 40149 files and directories currently installed.)<br>Removing iptables (1.8.9-2) ...<br>Removing libip6tc2:amd64 (1.8.9-2) ...<br>Removing libnetfilter-conntrack3:amd64 (1.0.9-3) ...<br>Removing libnfnetlink0:amd64 (1.0.2-2) ...<br>Processing triggers for libc-bin (2.36-9+deb12u3) ...<br>Success (router installed)<br>root@bookworm-unattended:~# bash router-up<br>Hit:1 http://ftp.ee.debian.org/debian bookworm InRelease<br>Hit:2 http://ftp.ee.debian.org/debian bookworm-updates InRelease<br>Hit:3 http://security.debian.org/debian-security bookworm-security InRelease<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>All packages are up to date.<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>Calculating upgrade... Done<br>0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>The following additional packages will be installed:<br>  dns-root-data dnsmasq-base libip6tc2 libnetfilter-conntrack3 libnfnetlink0<br>Suggested packages:<br>  resolvconf firewalld<br>The following NEW packages will be installed:<br>  dns-root-data dnsmasq dnsmasq-base iptables libip6tc2 libnetfilter-conntrack3 libnfnetlink0<br>0 upgraded, 7 newly installed, 0 to remove and 0 not upgraded.<br>Need to get 973 kB of archives.<br>After this operation, 3,988 kB of additional disk space will be used.<br>Get:1 http://ftp.ee.debian.org/debian bookworm/main amd64 dns-root-data all 2023010101 [4,124 B]<br>Get:2 http://ftp.ee.debian.org/debian bookworm/main amd64 libnfnetlink0 amd64 1.0.2-2 [15.1 kB]<br>Get:3 http://ftp.ee.debian.org/debian bookworm/main amd64 libnetfilter-conntrack3 amd64 1.0.9-3 [40.7 kB]<br>Get:4 http://ftp.ee.debian.org/debian bookworm/main amd64 dnsmasq-base amd64 2.89-1 [501 kB]<br>Get:5 http://ftp.ee.debian.org/debian bookworm/main amd64 dnsmasq all 2.89-1 [32.4 kB]<br>Get:6 http://ftp.ee.debian.org/debian bookworm/main amd64 libip6tc2 amd64 1.8.9-2 [19.4 kB]<br>Get:7 http://ftp.ee.debian.org/debian bookworm/main amd64 iptables amd64 1.8.9-2 [360 kB]<br>Fetched 973 kB in 0s (20.0 MB/s)<br>Selecting previously unselected package dns-root-data.<br>(Reading database ... 39933 files and directories currently installed.)<br>Preparing to unpack .../0-dns-root-data_2023010101_all.deb ...<br>Unpacking dns-root-data (2023010101) ...<br>Selecting previously unselected package libnfnetlink0:amd64.<br>Preparing to unpack .../1-libnfnetlink0_1.0.2-2_amd64.deb ...<br>Unpacking libnfnetlink0:amd64 (1.0.2-2) ...<br>Selecting previously unselected package libnetfilter-conntrack3:amd64.<br>Preparing to unpack .../2-libnetfilter-conntrack3_1.0.9-3_amd64.deb ...<br>Unpacking libnetfilter-conntrack3:amd64 (1.0.9-3) ...<br>Selecting previously unselected package dnsmasq-base.<br>Preparing to unpack .../3-dnsmasq-base_2.89-1_amd64.deb ...<br>Unpacking dnsmasq-base (2.89-1) ...<br>Selecting previously unselected package dnsmasq.<br>Preparing to unpack .../4-dnsmasq_2.89-1_all.deb ...<br>Unpacking dnsmasq (2.89-1) ...<br>Selecting previously unselected package libip6tc2:amd64.<br>Preparing to unpack .../5-libip6tc2_1.8.9-2_amd64.deb ...<br>Unpacking libip6tc2:amd64 (1.8.9-2) ...<br>Selecting previously unselected package iptables.<br>Preparing to unpack .../6-iptables_1.8.9-2_amd64.deb ...<br>Unpacking iptables (1.8.9-2) ...<br>Setting up libip6tc2:amd64 (1.8.9-2) ...<br>Setting up dns-root-data (2023010101) ...<br>Setting up libnfnetlink0:amd64 (1.0.2-2) ...<br>Setting up libnetfilter-conntrack3:amd64 (1.0.9-3) ...<br>Setting up iptables (1.8.9-2) ...<br>update-alternatives: using /usr/sbin/iptables-legacy to provide /usr/sbin/iptables (iptables) in auto mode<br>update-alternatives: using /usr/sbin/ip6tables-legacy to provide /usr/sbin/ip6tables (ip6tables) in auto mode<br>update-alternatives: using /usr/sbin/iptables-nft to provide /usr/sbin/iptables (iptables) in auto mode<br>update-alternatives: using /usr/sbin/ip6tables-nft to provide /usr/sbin/ip6tables (ip6tables) in auto mode<br>update-alternatives: using /usr/sbin/arptables-nft to provide /usr/sbin/arptables (arptables) in auto mode<br>update-alternatives: using /usr/sbin/ebtables-nft to provide /usr/sbin/ebtables (ebtables) in auto mode<br>Setting up dnsmasq-base (2.89-1) ...<br>Setting up dnsmasq (2.89-1) ...<br>Created symlink /etc/systemd/system/multi-user.target.wants/dnsmasq.service → /lib/systemd/system/dnsmasq.service.<br>Processing triggers for libc-bin (2.36-9+deb12u3) ...<br>Processing triggers for dbus (1.14.10-1~deb12u1) ...<br>Initial configuration exists<br>Success (router installed)<br>root@bookworm-unattended:~# ip a<br>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000<br>    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00<br>    inet 127.0.0.1/8 scope host lo<br>       valid_lft forever preferred_lft forever<br>    inet6 ::1/128 scope host noprefixroute<br>       valid_lft forever preferred_lft forever<br>2: enp0s3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000<br>    link/ether 08:00:27:12:e5:5d brd ff:ff:ff:ff:ff:ff<br>    inet 10.0.2.15/24 brd 10.0.2.255 scope global dynamic enp0s3<br>       valid_lft 86390sec preferred_lft 86390sec<br>    inet6 fe80::a00:27ff:fe12:e55d/64 scope link<br>       valid_lft forever preferred_lft forever<br>3: enp0s8: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000<br>    link/ether 08:00:27:d8:bd:6d brd ff:ff:ff:ff:ff:ff<br>    inet 10.0.10.1/24 brd 10.0.10.255 scope global enp0s8<br>       valid_lft forever preferred_lft forever<br>    inet6 fe80::a00:27ff:fed8:bd6d/64 scope link<br>       valid_lft forever preferred_lft forever<br>root@bookworm-unattended:~# cat /etc/hosts<br>127.0.0.1       localhost<br>127.0.1.1       bookworm-unattended<br><br># The following lines are desirable for IPv6 capable hosts<br>::1     localhost ip6-localhost ip6-loopback<br>ff02::1 ip6-allnodes<br>ff02::2 ip6-allrouters<br><br>interface=enp0s8<br>address=/ufo.mars/10.0.10.1<br>dhcp-range=eth1,10.0.10.20,10.0.10.25,12h<br>10.0.10.20      ufo0.mars<br>10.0.10.21      ufo1.mars<br>10.0.10.22      ufo2.mars<br>10.0.10.23      ufo3.mars<br>10.0.10.24      ufo4.mars<br>10.0.10.25      ufo5.mars<br>interface=enp0s8<br>address=/ufo.mars/10.0.10.1<br>dhcp-range=eth1,10.0.10.20,10.0.10.25,12h<br>10.0.10.20      ufo0.mars<br>10.0.10.21      ufo1.mars<br>10.0.10.22      ufo2.mars<br>10.0.10.23      ufo3.mars<br>10.0.10.24      ufo4.mars<br>10.0.10.25      ufo5.mars<br>root@bookworm-unattended:~# nano router-up<br>root@bookworm-unattended:~# bash router-down<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>The following packages will be REMOVED:<br>  dns-root-data* dnsmasq* dnsmasq-base*<br>0 upgraded, 0 newly installed, 3 to remove and 0 not upgraded.<br>After this operation, 1,261 kB disk space will be freed.<br>(Reading database ... 40223 files and directories currently installed.)<br>Removing dns-root-data (2023010101) ...<br>Removing dnsmasq (2.89-1) ...<br>Removing dnsmasq-base (2.89-1) ...<br>(Reading database ... 40165 files and directories currently installed.)<br>Purging configuration files for dnsmasq-base (2.89-1) ...<br>Purging configuration files for dnsmasq (2.89-1) ...<br>Processing triggers for dbus (1.14.10-1~deb12u1) ...<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>The following packages will be REMOVED:<br>  iptables* libip6tc2* libnetfilter-conntrack3* libnfnetlink0*<br>0 upgraded, 0 newly installed, 4 to remove and 0 not upgraded.<br>After this operation, 2,728 kB disk space will be freed.<br>(Reading database ... 40149 files and directories currently installed.)<br>Removing iptables (1.8.9-2) ...<br>Removing libip6tc2:amd64 (1.8.9-2) ...<br>Removing libnetfilter-conntrack3:amd64 (1.0.9-3) ...<br>Removing libnfnetlink0:amd64 (1.0.2-2) ...<br>Processing triggers for libc-bin (2.36-9+deb12u3) ...<br>Success (router installed)<br>root@bookworm-unattended:~# nano /etc/network/interfaces<br>root@bookworm-unattended:~# root@bookworm-unattended:~# nano /etc/hosts<br><br><br>root@bookworm-unattended:~# bash router-down<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>Package 'dnsmasq' is not installed, so not removed<br>0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.<br>router-down: line 36: iptables: command not found<br>router-down: line 37: iptables: command not found<br>router-down: line 39: iptables: command not found<br>router-down: line 40: iptables: command not found<br>router-down: line 42: iptables: command not found<br>router-down: line 43: iptables: command not found<br>router-down: line 44: iptables: command not found<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>Package 'iptables' is not installed, so not removed<br>0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.<br>Success (router installed)<br>root@bookworm-unattended:~# nano router-down<br>root@bookworm-unattended:~# nano /etc/hosts.0<br>root@bookworm-unattended:~# nano router-down<br>root@bookworm-unattended:~# bash router-down<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>Package 'dnsmasq' is not installed, so not removed<br>0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.<br>router-down: line 36: iptables: command not found<br>router-down: line 37: iptables: command not found<br>router-down: line 39: iptables: command not found<br>router-down: line 40: iptables: command not found<br>router-down: line 42: iptables: command not found<br>router-down: line 43: iptables: command not found<br>router-down: line 44: iptables: command not found<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>Package 'iptables' is not installed, so not removed<br>0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.<br><br><br>root@bookworm-unattended:~# rm /etc/hosts.0<br>root@bookworm-unattended:~# nano /etc/hosts<br><br><br>root@bookworm-unattended:~# nano router-down<br>root@bookworm-unattended:~# bash router-up<br>Hit:1 http://ftp.ee.debian.org/debian bookworm InRelease<br>Hit:2 http://ftp.ee.debian.org/debian bookworm-updates InRelease<br>Hit:3 http://security.debian.org/debian-security bookworm-security InRelease<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>All packages are up to date.<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>Calculating upgrade... Done<br>0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.<br>Reading package lists... Done<br>Building dependency tree... Done<br>Reading state information... Done<br>The following additional packages will be installed:<br>  dns-root-data dnsmasq-base libip6tc2 libnetfilter-conntrack3 libnfnetlink0<br>Suggested packages:<br>  resolvconf firewalld<br>The following NEW packages will be installed:<br>  dns-root-data dnsmasq dnsmasq-base iptables libip6tc2 libnetfilter-conntrack3 libnfnetlink0<br>0 upgraded, 7 newly installed, 0 to remove and 0 not upgraded.<br>Need to get 973 kB of archives.<br>After this operation, 3,988 kB of additional disk space will be used.<br>Get:1 http://ftp.ee.debian.org/debian bookworm/main amd64 dns-root-data all 2023010101 [4,124 B]<br>Get:2 http://ftp.ee.debian.org/debian bookworm/main amd64 libnfnetlink0 amd64 1.0.2-2 [15.1 kB]<br>Get:3 http://ftp.ee.debian.org/debian bookworm/main amd64 libnetfilter-conntrack3 amd64 1.0.9-3 [40.7 kB]<br>Get:4 http://ftp.ee.debian.org/debian bookworm/main amd64 dnsmasq-base amd64 2.89-1 [501 kB]<br>Get:5 http://ftp.ee.debian.org/debian bookworm/main amd64 dnsmasq all 2.89-1 [32.4 kB]<br>Get:6 http://ftp.ee.debian.org/debian bookworm/main amd64 libip6tc2 amd64 1.8.9-2 [19.4 kB]<br>Get:7 http://ftp.ee.debian.org/debian bookworm/main amd64 iptables amd64 1.8.9-2 [360 kB]<br>Fetched 973 kB in 0s (19.3 MB/s)<br>Selecting previously unselected package dns-root-data.<br>(Reading database ... 39933 files and directories currently installed.)<br>Preparing to unpack .../0-dns-root-data_2023010101_all.deb ...<br>Unpacking dns-root-data (2023010101) ...<br>Selecting previously unselected package libnfnetlink0:amd64.<br>Preparing to unpack .../1-libnfnetlink0_1.0.2-2_amd64.deb ...<br>Unpacking libnfnetlink0:amd64 (1.0.2-2) ...<br>Selecting previously unselected package libnetfilter-conntrack3:amd64.<br>Preparing to unpack .../2-libnetfilter-conntrack3_1.0.9-3_amd64.deb ...<br>Unpacking libnetfilter-conntrack3:amd64 (1.0.9-3) ...<br>Selecting previously unselected package dnsmasq-base.<br>Preparing to unpack .../3-dnsmasq-base_2.89-1_amd64.deb ...<br>Unpacking dnsmasq-base (2.89-1) ...<br>Selecting previously unselected package dnsmasq.<br>Preparing to unpack .../4-dnsmasq_2.89-1_all.deb ...<br>Unpacking dnsmasq (2.89-1) ...<br>Selecting previously unselected package libip6tc2:amd64.<br>Preparing to unpack .../5-libip6tc2_1.8.9-2_amd64.deb ...<br>Unpacking libip6tc2:amd64 (1.8.9-2) ...<br>Selecting previously unselected package iptables.<br>Preparing to unpack .../6-iptables_1.8.9-2_amd64.deb ...<br>Unpacking iptables (1.8.9-2) ...<br>Setting up libip6tc2:amd64 (1.8.9-2) ...<br>Setting up dns-root-data (2023010101) ...<br>Setting up libnfnetlink0:amd64 (1.0.2-2) ...<br>Setting up libnetfilter-conntrack3:amd64 (1.0.9-3) ...<br>Setting up iptables (1.8.9-2) ...<br>update-alternatives: using /usr/sbin/iptables-legacy to provide /usr/sbin/iptables (iptables) in auto mode<br>update-alternatives: using /usr/sbin/ip6tables-legacy to provide /usr/sbin/ip6tables (ip6tables) in auto mode<br>update-alternatives: using /usr/sbin/iptables-nft to provide /usr/sbin/iptables (iptables) in auto mode<br>update-alternatives: using /usr/sbin/ip6tables-nft to provide /usr/sbin/ip6tables (ip6tables) in auto mode<br>update-alternatives: using /usr/sbin/arptables-nft to provide /usr/sbin/arptables (arptables) in auto mode<br>update-alternatives: using /usr/sbin/ebtables-nft to provide /usr/sbin/ebtables (ebtables) in auto mode<br>Setting up dnsmasq-base (2.89-1) ...<br>Setting up dnsmasq (2.89-1) ...<br>Created symlink /etc/systemd/system/multi-user.target.wants/dnsmasq.service → /lib/systemd/system/dnsmasq.service.<br>Processing triggers for libc-bin (2.36-9+deb12u3) ...<br>Processing triggers for dbus (1.14.10-1~deb12u1) ...<br>Success (router installed)<br>root@bookworm-unattended:~# ip a<br>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000<br>    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00<br>    inet 127.0.0.1/8 scope host lo<br>       valid_lft forever preferred_lft forever<br>    inet6 ::1/128 scope host noprefixroute<br>       valid_lft forever preferred_lft forever<br>2: enp0s3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000<br>    link/ether 08:00:27:12:e5:5d brd ff:ff:ff:ff:ff:ff<br>    inet 10.0.2.15/24 brd 10.0.2.255 scope global dynamic enp0s3<br>       valid_lft 86394sec preferred_lft 86394sec<br>    inet6 fe80::a00:27ff:fe12:e55d/64 scope link<br>       valid_lft forever preferred_lft forever<br>3: enp0s8: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000<br>    link/ether 08:00:27:d8:bd:6d brd ff:ff:ff:ff:ff:ff<br>    inet 10.0.10.1/24 brd 10.0.10.255 scope global enp0s8<br>       valid_lft forever preferred_lft forever<br>    inet6 fe80::a00:27ff:fed8:bd6d/64 scope link<br>       valid_lft forever preferred_lft forever<br>root@bookworm-unattended:~# cat /proc/sys/net/ipv4/ip_forward<br>0<br>root@bookworm-unattended:~# nano router-up<br>root@bookworm-unattended:~# nano router-up<br>root@bookworm-unattended:~# /etc/network/if-up.d/00-firewall<br>root@bookworm-unattended:~# batcat router-up<br>root@bookworm-unattended:~# batcat router-up --paging=none<br></span><span
style="color:#E74856;background-color:#0C0C0C;">error:</span><span style="color:#CCCCCC;background-color:#0C0C0C;"> "none" isn't a valid value for '</span><span
style="color:#C19C00;background-color:#0C0C0C;">--paging &lt;when&gt;</span><span
style="color:#CCCCCC;background-color:#0C0C0C;">'<br>        [possible values: </span><span
style="color:#13A10E;background-color:#0C0C0C;">auto</span><span style="color:#CCCCCC;background-color:#0C0C0C;">, </span><span
style="color:#13A10E;background-color:#0C0C0C;">never</span><span style="color:#CCCCCC;background-color:#0C0C0C;">, </span><span
style="color:#13A10E;background-color:#0C0C0C;">always</span><span style="color:#CCCCCC;background-color:#0C0C0C;">]<br><br>For more information try </span><span
style="color:#13A10E;background-color:#0C0C0C;">--help<br></span><span style="color:#CCCCCC;background-color:#0C0C0C;">root@bookworm-unattended:~# batcat router-up --paging=never<br></span><span
style="color:#444444;background-color:#0C0C0C;">───────┬────────────────────────────────────────────────────────────────────────────────────────────────────────────────<br></span><span
style="color:#CCCCCC;background-color:#0C0C0C;">       </span><span style="color:#444444;background-color:#0C0C0C;">│ </span><span
style="color:#CCCCCC;background-color:#0C0C0C;">File: </span><span style="color:#F2F2F2;background-color:#0C0C0C;">router-up<br></span><span
style="color:#444444;background-color:#0C0C0C;">───────┼────────────────────────────────────────────────────────────────────────────────────────────────────────────────<br>   1   │ </span><span
style="color:#767676;background-color:#0C0C0C;">#! /bin/bash<br></span><span style="color:#444444;background-color:#0C0C0C;">   2   │<br>   3   │ </span><span
style="color:#767676;background-color:#0C0C0C;"># root ?<br></span><span style="color:#444444;background-color:#0C0C0C;">   4   │<br>   5   │ </span><span
style="color:#FF5F5F;background-color:#0C0C0C;">if </span><span style="color:#FFFFFF;background-color:#0C0C0C;">test `id </span><span
style="color:#FF8700;background-color:#0C0C0C;">-u</span><span style="color:#FFFFFF;background-color:#0C0C0C;">` </span><span
style="color:#FF8700;background-color:#0C0C0C;">-ne </span><span style="color:#FFFFFF;background-color:#0C0C0C;">0<br></span><span
style="color:#444444;background-color:#0C0C0C;">   6   │ </span><span style="color:#FF5F5F;background-color:#0C0C0C;">then<br></span><span
style="color:#444444;background-color:#0C0C0C;">   7   │   </span><span style="color:#5FD7FF;background-color:#0C0C0C;">echo </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">"</span><span style="color:#D7D787;background-color:#0C0C0C;">ur not root bro</span><span
style="color:#FFFFFF;background-color:#0C0C0C;">"<br></span><span style="color:#444444;background-color:#0C0C0C;">   8   │   </span><span
style="color:#5FD7FF;background-color:#0C0C0C;">exit </span><span style="color:#FFFFFF;background-color:#0C0C0C;">1<br></span><span
style="color:#444444;background-color:#0C0C0C;">   9   │ </span><span style="color:#FF5F5F;background-color:#0C0C0C;">fi<br></span><span
style="color:#444444;background-color:#0C0C0C;">  10   │<br>  11   │ </span><span
style="color:#767676;background-color:#0C0C0C;"># place<br></span><span style="color:#444444;background-color:#0C0C0C;">  12   │<br>  13   │ </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">place</span><span style="color:#FF5F5F;background-color:#0C0C0C;">=</span><span
style="color:#FFFFFF;background-color:#0C0C0C;">$</span><span style="color:#D7D787;background-color:#0C0C0C;">(</span><span
style="color:#FFFFFF;background-color:#0C0C0C;">pwd</span><span style="color:#D7D787;background-color:#0C0C0C;">)<br></span><span
style="color:#444444;background-color:#0C0C0C;">  14   │ </span><span style="color:#FFFFFF;background-color:#0C0C0C;">time</span><span
style="color:#FF5F5F;background-color:#0C0C0C;">=</span><span style="color:#FFFFFF;background-color:#0C0C0C;">$</span><span
style="color:#D7D787;background-color:#0C0C0C;">(</span><span style="color:#FFFFFF;background-color:#0C0C0C;">date </span><span
style="color:#D7D787;background-color:#0C0C0C;">+</span><span style="color:#FFFFFF;background-color:#0C0C0C;">%s</span><span
style="color:#D7D787;background-color:#0C0C0C;">)<br></span><span style="color:#444444;background-color:#0C0C0C;">  15   │<br>  16   │ </span><span
style="color:#767676;background-color:#0C0C0C;"># install<br></span><span style="color:#444444;background-color:#0C0C0C;">  17   │<br>  18   │ </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">apt update </span><span style="color:#FF5F5F;background-color:#0C0C0C;">&amp;&amp; </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">apt upgrade </span><span style="color:#FF8700;background-color:#0C0C0C;">-y<br></span><span
style="color:#444444;background-color:#0C0C0C;">  19   │ </span><span style="color:#FFFFFF;background-color:#0C0C0C;">apt </span><span
style="color:#FF8700;background-color:#0C0C0C;">-y </span><span style="color:#FFFFFF;background-color:#0C0C0C;">install dnsmasq iptables<br></span><span
style="color:#444444;background-color:#0C0C0C;">  20   │<br>  21   │ </span><span
style="color:#FF5F5F;background-color:#0C0C0C;">if </span><span style="color:#5FD7FF;background-color:#0C0C0C;">[ </span><span
style="color:#FF8700;background-color:#0C0C0C;">-f </span><span style="color:#FFFFFF;background-color:#0C0C0C;">/etc/network/interfaces.0 </span><span
style="color:#5FD7FF;background-color:#0C0C0C;">]<br></span><span style="color:#444444;background-color:#0C0C0C;">  22   │ </span><span
style="color:#FF5F5F;background-color:#0C0C0C;">then<br></span><span style="color:#444444;background-color:#0C0C0C;">  23   │   </span><span
style="color:#5FD7FF;background-color:#0C0C0C;">echo </span><span style="color:#FFFFFF;background-color:#0C0C0C;">"</span><span
style="color:#D7D787;background-color:#0C0C0C;">Initial configuration exists</span><span
style="color:#FFFFFF;background-color:#0C0C0C;">"<br></span><span style="color:#444444;background-color:#0C0C0C;">  24   │ </span><span
style="color:#FF5F5F;background-color:#0C0C0C;">else<br></span><span style="color:#444444;background-color:#0C0C0C;">  25   │ </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">cp /etc/network/interfaces /etc/network/interfaces.0<br></span><span
style="color:#444444;background-color:#0C0C0C;">  26   │ </span><span style="color:#FFFFFF;background-color:#0C0C0C;">cat </span><span
style="color:#FF5F5F;background-color:#0C0C0C;">&lt;&lt; BASTA &gt;&gt; </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">/etc/network/interfaces<br></span><span
style="color:#444444;background-color:#0C0C0C;">  27   │ </span><span style="color:#D7D787;background-color:#0C0C0C;"># Secondary network interface<br></span><span
style="color:#444444;background-color:#0C0C0C;">  28   │<br>  29   │ </span><span
style="color:#D7D787;background-color:#0C0C0C;">allow-hotplug enp0s8<br></span><span
style="color:#444444;background-color:#0C0C0C;">  30   │ </span><span style="color:#D7D787;background-color:#0C0C0C;">iface enp0s8 inet static<br></span><span
style="color:#444444;background-color:#0C0C0C;">  31   │</span><span style="color:#CCCCCC;background-color:#0C0C0C;">         </span><span
style="color:#D7D787;background-color:#0C0C0C;">address 10.0.10.1<br></span><span
style="color:#444444;background-color:#0C0C0C;">  32   │</span><span style="color:#CCCCCC;background-color:#0C0C0C;">         </span><span
style="color:#D7D787;background-color:#0C0C0C;">netmask 255.255.255.0<br></span><span
style="color:#444444;background-color:#0C0C0C;">  33   │</span><span style="color:#CCCCCC;background-color:#0C0C0C;">         </span><span
style="color:#D7D787;background-color:#0C0C0C;">gateway 10.0.10.1<br></span><span
style="color:#444444;background-color:#0C0C0C;">  34   │</span><span style="color:#CCCCCC;background-color:#0C0C0C;">         </span><span
style="color:#D7D787;background-color:#0C0C0C;">dns-search google.com<br></span><span
style="color:#444444;background-color:#0C0C0C;">  35   │</span><span style="color:#CCCCCC;background-color:#0C0C0C;">         </span><span
style="color:#D7D787;background-color:#0C0C0C;">dns-nameservers 10.0.10.1<br></span><span
style="color:#444444;background-color:#0C0C0C;">  36   │ </span><span style="color:#FF5F5F;background-color:#0C0C0C;">BASTA<br></span><span
style="color:#444444;background-color:#0C0C0C;">  37   │ </span><span style="color:#FF5F5F;background-color:#0C0C0C;">fi<br></span><span
style="color:#444444;background-color:#0C0C0C;">  38   │<br>  39   │ </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">cp /etc/dnsmasq.conf /etc/dnsmasq.conf.$time<br></span><span
style="color:#444444;background-color:#0C0C0C;">  40   │ </span><span style="color:#FFFFFF;background-color:#0C0C0C;">cat </span><span
style="color:#FF5F5F;background-color:#0C0C0C;">&lt;&lt; BASTA &gt;&gt; </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">/etc/dnsmasq.conf<br></span><span
style="color:#444444;background-color:#0C0C0C;">  41   │ </span><span style="color:#D7D787;background-color:#0C0C0C;">interface=enp0s8<br></span><span
style="color:#444444;background-color:#0C0C0C;">  42   │ </span><span style="color:#D7D787;background-color:#0C0C0C;">address=/ufo.mars/10.0.10.1<br></span><span
style="color:#444444;background-color:#0C0C0C;">  43   │ </span><span style="color:#D7D787;background-color:#0C0C0C;">dhcp-range=eth1,10.0.10.20,10.0.10.25,12h<br></span><span
style="color:#444444;background-color:#0C0C0C;">  44   │ </span><span style="color:#FF5F5F;background-color:#0C0C0C;">BASTA<br></span><span
style="color:#444444;background-color:#0C0C0C;">  45   │<br>  46   │ </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">systemctl restart networking<br></span><span
style="color:#444444;background-color:#0C0C0C;">  47   │<br>  48   │ </span><span
style="color:#767676;background-color:#0C0C0C;"># Done<br></span><span style="color:#444444;background-color:#0C0C0C;">  49   │<br>  50   │ </span><span
style="color:#FF5F5F;background-color:#0C0C0C;">if </span><span style="color:#5FD7FF;background-color:#0C0C0C;">[ </span><span
style="color:#FF8700;background-color:#0C0C0C;">-f </span><span style="color:#FFFFFF;background-color:#0C0C0C;">/etc/network/hosts.0 </span><span
style="color:#5FD7FF;background-color:#0C0C0C;">]<br></span><span style="color:#444444;background-color:#0C0C0C;">  51   │ </span><span
style="color:#FF5F5F;background-color:#0C0C0C;">then<br></span><span style="color:#444444;background-color:#0C0C0C;">  52   │   </span><span
style="color:#5FD7FF;background-color:#0C0C0C;">echo </span><span style="color:#FFFFFF;background-color:#0C0C0C;">"</span><span
style="color:#D7D787;background-color:#0C0C0C;">Initial hosts file already backed up</span><span
style="color:#FFFFFF;background-color:#0C0C0C;">"<br></span><span style="color:#444444;background-color:#0C0C0C;">  53   │ </span><span
style="color:#FF5F5F;background-color:#0C0C0C;">else<br></span><span style="color:#444444;background-color:#0C0C0C;">  54   │ </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">cp /etc/hosts /etc/hosts.0<br></span><span
style="color:#444444;background-color:#0C0C0C;">  55   │ </span><span style="color:#FFFFFF;background-color:#0C0C0C;">cat </span><span
style="color:#FF5F5F;background-color:#0C0C0C;">&lt;&lt; BASTA &gt;&gt; </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">/etc/hosts<br></span><span style="color:#444444;background-color:#0C0C0C;">  56   │ </span><span
style="color:#D7D787;background-color:#0C0C0C;">interface=enp0s8<br></span><span
style="color:#444444;background-color:#0C0C0C;">  57   │ </span><span style="color:#D7D787;background-color:#0C0C0C;">address=/ufo.mars/10.0.10.1<br></span><span
style="color:#444444;background-color:#0C0C0C;">  58   │ </span><span style="color:#D7D787;background-color:#0C0C0C;">dhcp-range=eth1,10.0.10.20,10.0.10.25,12h<br></span><span
style="color:#444444;background-color:#0C0C0C;">  59   │ </span><span style="color:#D7D787;background-color:#0C0C0C;">10.0.10.20      ufo0.mars<br></span><span
style="color:#444444;background-color:#0C0C0C;">  60   │ </span><span style="color:#D7D787;background-color:#0C0C0C;">10.0.10.21      ufo1.mars<br></span><span
style="color:#444444;background-color:#0C0C0C;">  61   │ </span><span style="color:#D7D787;background-color:#0C0C0C;">10.0.10.22      ufo2.mars<br></span><span
style="color:#444444;background-color:#0C0C0C;">  62   │ </span><span style="color:#D7D787;background-color:#0C0C0C;">10.0.10.23      ufo3.mars<br></span><span
style="color:#444444;background-color:#0C0C0C;">  63   │ </span><span style="color:#D7D787;background-color:#0C0C0C;">10.0.10.24      ufo4.mars<br></span><span
style="color:#444444;background-color:#0C0C0C;">  64   │ </span><span style="color:#D7D787;background-color:#0C0C0C;">10.0.10.25      ufo5.mars<br></span><span
style="color:#444444;background-color:#0C0C0C;">  65   │ </span><span style="color:#FF5F5F;background-color:#0C0C0C;">BASTA<br></span><span
style="color:#444444;background-color:#0C0C0C;">  66   │ </span><span style="color:#FF5F5F;background-color:#0C0C0C;">fi<br></span><span
style="color:#444444;background-color:#0C0C0C;">  67   │<br>  68   │ </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">systemctl restart dnsmasq<br></span><span
style="color:#444444;background-color:#0C0C0C;">  69   │<br>  70   │ </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">cat </span><span style="color:#FF5F5F;background-color:#0C0C0C;">&lt;&lt; BASTA &gt; </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">/etc/network/if-up.d/00-firewall<br></span><span
style="color:#444444;background-color:#0C0C0C;">  71   │ </span><span style="color:#D7D787;background-color:#0C0C0C;">#!/bin/sh<br></span><span
style="color:#444444;background-color:#0C0C0C;">  72   │ </span><span style="color:#D7D787;background-color:#0C0C0C;"># Reload the iptables rules and activate forwarding<br></span><span
style="color:#444444;background-color:#0C0C0C;">  73   │<br>  74   │ </span><span
style="color:#D7D787;background-color:#0C0C0C;">set -e<br></span><span style="color:#444444;background-color:#0C0C0C;">  75   │<br>  76   │ </span><span
style="color:#D7D787;background-color:#0C0C0C;"># delete all existing rules.<br></span><span
style="color:#444444;background-color:#0C0C0C;">  77   │ </span><span style="color:#D7D787;background-color:#0C0C0C;">iptables -Z             # zero counters<br></span><span
style="color:#444444;background-color:#0C0C0C;">  78   │ </span><span style="color:#D7D787;background-color:#0C0C0C;">iptables -F             # flush (delete) rules<br></span><span
style="color:#444444;background-color:#0C0C0C;">  79   │<br>  80   │ </span><span
style="color:#D7D787;background-color:#0C0C0C;">iptables -t mangle -F<br></span><span
style="color:#444444;background-color:#0C0C0C;">  81   │ </span><span style="color:#D7D787;background-color:#0C0C0C;">iptables -X             # delete all extra chains<br></span><span
style="color:#444444;background-color:#0C0C0C;">  82   │<br>  83   │ </span><span
style="color:#D7D787;background-color:#0C0C0C;"># If you want to clear the chains, then clear the chains:<br></span><span
style="color:#444444;background-color:#0C0C0C;">  84   │ </span><span style="color:#D7D787;background-color:#0C0C0C;">iptables --policy INPUT   ACCEPT;<br></span><span
style="color:#444444;background-color:#0C0C0C;">  85   │ </span><span style="color:#D7D787;background-color:#0C0C0C;">iptables --policy OUTPUT  ACCEPT;<br></span><span
style="color:#444444;background-color:#0C0C0C;">  86   │ </span><span style="color:#D7D787;background-color:#0C0C0C;">iptables --policy FORWARD ACCEPT;<br></span><span
style="color:#444444;background-color:#0C0C0C;">  87   │<br>  88   │ </span><span
style="color:#D7D787;background-color:#0C0C0C;"># Masquerade.<br></span><span style="color:#444444;background-color:#0C0C0C;">  89   │ </span><span
style="color:#D7D787;background-color:#0C0C0C;">iptables -t nat -A POSTROUTING -o enp0s3 -j MASQUERADE<br></span><span
style="color:#444444;background-color:#0C0C0C;">  90   │<br>  91   │ </span><span
style="color:#D7D787;background-color:#0C0C0C;"># Enable routing.<br></span><span
style="color:#444444;background-color:#0C0C0C;">  92   │ </span><span style="color:#D7D787;background-color:#0C0C0C;">echo 1 &gt; /proc/sys/net/ipv4/ip_forward<br></span><span
style="color:#444444;background-color:#0C0C0C;">  93   │ </span><span style="color:#FF5F5F;background-color:#0C0C0C;">BASTA<br></span><span
style="color:#444444;background-color:#0C0C0C;">  94   │<br>  95   │ </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">chmod +x /etc/network/if-up.d/00-firewall<br></span><span
style="color:#444444;background-color:#0C0C0C;">  96   │ </span><span style="color:#FFFFFF;background-color:#0C0C0C;">/etc/network/if-up.d/00-firewall<br></span><span
style="color:#444444;background-color:#0C0C0C;">  97   │<br>  98   │ </span><span
style="color:#5FD7FF;background-color:#0C0C0C;">cd </span><span style="color:#FFFFFF;background-color:#0C0C0C;">$place<br></span><span
style="color:#444444;background-color:#0C0C0C;">  99   │ </span><span style="color:#5FD7FF;background-color:#0C0C0C;">echo </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">"</span><span style="color:#D7D787;background-color:#0C0C0C;">Success (router installed)</span><span
style="color:#FFFFFF;background-color:#0C0C0C;">"<br></span><span style="color:#444444;background-color:#0C0C0C;">───────┴────────────────────────────────────────────────────────────────────────────────────────────────────────────────<br></span><span
style="color:#CCCCCC;background-color:#0C0C0C;">root@bookworm-unattended:~# batcat router-down --paging=never<br></span><span
style="color:#444444;background-color:#0C0C0C;">───────┬────────────────────────────────────────────────────────────────────────────────────────────────────────────────<br></span><span
style="color:#CCCCCC;background-color:#0C0C0C;">       </span><span style="color:#444444;background-color:#0C0C0C;">│ </span><span
style="color:#CCCCCC;background-color:#0C0C0C;">File: </span><span style="color:#F2F2F2;background-color:#0C0C0C;">router-down<br></span><span
style="color:#444444;background-color:#0C0C0C;">───────┼────────────────────────────────────────────────────────────────────────────────────────────────────────────────<br>   1   │ </span><span
style="color:#767676;background-color:#0C0C0C;">#! /bin/bash<br></span><span style="color:#444444;background-color:#0C0C0C;">   2   │<br>   3   │ </span><span
style="color:#767676;background-color:#0C0C0C;"># root ?<br></span><span style="color:#444444;background-color:#0C0C0C;">   4   │<br>   5   │ </span><span
style="color:#FF5F5F;background-color:#0C0C0C;">if </span><span style="color:#FFFFFF;background-color:#0C0C0C;">test `id </span><span
style="color:#FF8700;background-color:#0C0C0C;">-u</span><span style="color:#FFFFFF;background-color:#0C0C0C;">` </span><span
style="color:#FF8700;background-color:#0C0C0C;">-ne </span><span style="color:#FFFFFF;background-color:#0C0C0C;">0<br></span><span
style="color:#444444;background-color:#0C0C0C;">   6   │ </span><span style="color:#FF5F5F;background-color:#0C0C0C;">then<br></span><span
style="color:#444444;background-color:#0C0C0C;">   7   │   </span><span style="color:#5FD7FF;background-color:#0C0C0C;">echo </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">"</span><span style="color:#D7D787;background-color:#0C0C0C;">ur not root bro</span><span
style="color:#FFFFFF;background-color:#0C0C0C;">"<br></span><span style="color:#444444;background-color:#0C0C0C;">   8   │   </span><span
style="color:#5FD7FF;background-color:#0C0C0C;">exit </span><span style="color:#FFFFFF;background-color:#0C0C0C;">1<br></span><span
style="color:#444444;background-color:#0C0C0C;">   9   │ </span><span style="color:#FF5F5F;background-color:#0C0C0C;">fi<br></span><span
style="color:#444444;background-color:#0C0C0C;">  10   │<br>  11   │ </span><span
style="color:#767676;background-color:#0C0C0C;"># place<br></span><span style="color:#444444;background-color:#0C0C0C;">  12   │<br>  13   │ </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">place</span><span style="color:#FF5F5F;background-color:#0C0C0C;">=</span><span
style="color:#FFFFFF;background-color:#0C0C0C;">$</span><span style="color:#D7D787;background-color:#0C0C0C;">(</span><span
style="color:#FFFFFF;background-color:#0C0C0C;">pwd</span><span style="color:#D7D787;background-color:#0C0C0C;">)<br></span><span
style="color:#444444;background-color:#0C0C0C;">  14   │ </span><span style="color:#FFFFFF;background-color:#0C0C0C;">time</span><span
style="color:#FF5F5F;background-color:#0C0C0C;">=</span><span style="color:#FFFFFF;background-color:#0C0C0C;">$</span><span
style="color:#D7D787;background-color:#0C0C0C;">(</span><span style="color:#FFFFFF;background-color:#0C0C0C;">date </span><span
style="color:#D7D787;background-color:#0C0C0C;">+</span><span style="color:#FFFFFF;background-color:#0C0C0C;">%s</span><span
style="color:#D7D787;background-color:#0C0C0C;">)<br></span><span style="color:#444444;background-color:#0C0C0C;">  15   │<br>  16   │ </span><span
style="color:#767676;background-color:#0C0C0C;"># install<br></span><span style="color:#444444;background-color:#0C0C0C;">  17   │<br>  18   │ </span><span
style="color:#FF5F5F;background-color:#0C0C0C;">if </span><span style="color:#5FD7FF;background-color:#0C0C0C;">[ </span><span
style="color:#FF8700;background-color:#0C0C0C;">-f </span><span style="color:#FFFFFF;background-color:#0C0C0C;">/etc/network/interfaces.0 </span><span
style="color:#5FD7FF;background-color:#0C0C0C;">]<br></span><span style="color:#444444;background-color:#0C0C0C;">  19   │ </span><span
style="color:#FF5F5F;background-color:#0C0C0C;">then<br></span><span style="color:#444444;background-color:#0C0C0C;">  20   │   </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">cp /etc/network/interfaces.0 /etc/network/interfaces<br></span><span
style="color:#444444;background-color:#0C0C0C;">  21   │   </span><span style="color:#FFFFFF;background-color:#0C0C0C;">rm </span><span
style="color:#FF8700;background-color:#0C0C0C;">-f </span><span style="color:#FFFFFF;background-color:#0C0C0C;">/etc/network/interfaces.0<br></span><span
style="color:#444444;background-color:#0C0C0C;">  22   │ </span><span style="color:#FF5F5F;background-color:#0C0C0C;">fi<br></span><span
style="color:#444444;background-color:#0C0C0C;">  23   │<br>  24   │ </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">systemctl restart networking<br></span><span
style="color:#444444;background-color:#0C0C0C;">  25   │<br>  26   │ </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">apt </span><span style="color:#FF8700;background-color:#0C0C0C;">-y </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">autoremove </span><span style="color:#FF8700;background-color:#0C0C0C;">--purge </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">dnsmasq<br></span><span style="color:#444444;background-color:#0C0C0C;">  27   │<br>  28   │ </span><span
style="color:#FF5F5F;background-color:#0C0C0C;">if </span><span style="color:#5FD7FF;background-color:#0C0C0C;">[ </span><span
style="color:#FF8700;background-color:#0C0C0C;">-f </span><span style="color:#FFFFFF;background-color:#0C0C0C;">/etc/hosts.0 </span><span
style="color:#5FD7FF;background-color:#0C0C0C;">]<br></span><span style="color:#444444;background-color:#0C0C0C;">  29   │ </span><span
style="color:#FF5F5F;background-color:#0C0C0C;">then<br></span><span style="color:#444444;background-color:#0C0C0C;">  30   │   </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">cp /etc/hosts.0 /etc/hosts<br></span><span
style="color:#444444;background-color:#0C0C0C;">  31   │   </span><span style="color:#FFFFFF;background-color:#0C0C0C;">rm </span><span
style="color:#FF8700;background-color:#0C0C0C;">-f </span><span style="color:#FFFFFF;background-color:#0C0C0C;">/etc/hosts.0<br></span><span
style="color:#444444;background-color:#0C0C0C;">  32   │ </span><span style="color:#FF5F5F;background-color:#0C0C0C;">fi<br></span><span
style="color:#444444;background-color:#0C0C0C;">  33   │<br>  34   │ </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">rm </span><span style="color:#FF8700;background-color:#0C0C0C;">-rf </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">/etc/network/if-up.d/00-firewall<br></span><span
style="color:#444444;background-color:#0C0C0C;">  35   │<br>  36   │ </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">iptables </span><span style="color:#FF8700;background-color:#0C0C0C;">-Z             </span><span
style="color:#767676;background-color:#0C0C0C;"># zero counters<br></span><span
style="color:#444444;background-color:#0C0C0C;">  37   │ </span><span style="color:#FFFFFF;background-color:#0C0C0C;">iptables </span><span
style="color:#FF8700;background-color:#0C0C0C;">-F             </span><span style="color:#767676;background-color:#0C0C0C;"># flush (delete) rules<br></span><span
style="color:#444444;background-color:#0C0C0C;">  38   │<br>  39   │ </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">iptables </span><span style="color:#FF8700;background-color:#0C0C0C;">-t </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">mangle </span><span style="color:#FF8700;background-color:#0C0C0C;">-F<br></span><span
style="color:#444444;background-color:#0C0C0C;">  40   │ </span><span style="color:#FFFFFF;background-color:#0C0C0C;">iptables </span><span
style="color:#FF8700;background-color:#0C0C0C;">-X             </span><span style="color:#767676;background-color:#0C0C0C;"># delete all extra chains<br></span><span
style="color:#444444;background-color:#0C0C0C;">  41   │<br>  42   │ </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">iptables </span><span style="color:#FF8700;background-color:#0C0C0C;">--policy </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">INPUT   ACCEPT</span><span style="color:#FF5F5F;background-color:#0C0C0C;">;<br></span><span
style="color:#444444;background-color:#0C0C0C;">  43   │ </span><span style="color:#FFFFFF;background-color:#0C0C0C;">iptables </span><span
style="color:#FF8700;background-color:#0C0C0C;">--policy </span><span style="color:#FFFFFF;background-color:#0C0C0C;">OUTPUT  ACCEPT</span><span
style="color:#FF5F5F;background-color:#0C0C0C;">;<br></span><span style="color:#444444;background-color:#0C0C0C;">  44   │ </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">iptables </span><span style="color:#FF8700;background-color:#0C0C0C;">--policy </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">FORWARD ACCEPT</span><span style="color:#FF5F5F;background-color:#0C0C0C;">;<br></span><span
style="color:#444444;background-color:#0C0C0C;">  45   │<br>  46   │ </span><span
style="color:#5FD7FF;background-color:#0C0C0C;">echo </span><span style="color:#FFFFFF;background-color:#0C0C0C;">0 </span><span
style="color:#FF5F5F;background-color:#0C0C0C;">&gt; </span><span style="color:#FFFFFF;background-color:#0C0C0C;">/proc/sys/net/ipv4/ip_forward<br></span><span
style="color:#444444;background-color:#0C0C0C;">  47   │<br>  48   │ </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">apt </span><span style="color:#FF8700;background-color:#0C0C0C;">-y </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">autoremove </span><span style="color:#FF8700;background-color:#0C0C0C;">--purge </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">iptables<br></span><span style="color:#444444;background-color:#0C0C0C;">  49   │<br>  50   │ </span><span
style="color:#5FD7FF;background-color:#0C0C0C;">cd </span><span style="color:#FFFFFF;background-color:#0C0C0C;">$place<br></span><span
style="color:#444444;background-color:#0C0C0C;">  51   │ </span><span style="color:#5FD7FF;background-color:#0C0C0C;">echo </span><span
style="color:#FFFFFF;background-color:#0C0C0C;">"</span><span style="color:#D7D787;background-color:#0C0C0C;">Success (router installed)</span><span
style="color:#FFFFFF;background-color:#0C0C0C;">"<br></span><span style="color:#444444;background-color:#0C0C0C;">───────┴────────────────────────────────────────────────────────────────────────────────────────────────────────────────<br></span><span
style="color:#CCCCCC;background-color:#0C0C0C;">root@bookworm-unattended:~#</span></div>
    <p></p>
  </body>
</html>
